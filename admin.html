<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giordano Admin Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --rosa: #e91e63; --laranja: #f37021; --azul-escuro: #1a237e; --fundo: #f4f7f6; --texto: #333; }
        * { box-sizing: border-box; }
        body { font-family: 'Montserrat', sans-serif; margin: 0; display: flex; background: var(--fundo); color: var(--texto); height: 100vh; overflow: hidden; }

        /* MENU LATERAL ESTILO BLUEDOX */
        .sidebar { width: 260px; background: var(--azul-escuro); color: white; display: flex; flex-direction: column; padding: 20px; flex-shrink: 0; }
        .logo-area { font-size: 20px; font-weight: bold; padding-bottom: 30px; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 20px; color: var(--rosa); }
        .nav-link { padding: 15px; border-radius: 8px; cursor: pointer; transition: 0.3s; margin-bottom: 5px; display: flex; align-items: center; }
        .nav-link:hover, .nav-link.active { background: var(--rosa); color: white; }
        .nav-link span { margin-right: 10px; }

        /* √ÅREA CONTE√öDO */
        .main-content { flex-grow: 1; padding: 30px; overflow-y: auto; }
        .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .tab-content { display: none; animation: fadeIn 0.3s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* CARDS DE RESUMO */
        .grid-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); text-align: center; border-bottom: 4px solid var(--rosa); }
        .stat-card h4 { margin: 0; font-size: 14px; color: #777; }
        .stat-card p { font-size: 24px; font-weight: bold; margin: 10px 0 0 0; color: var(--texto); }

        /* CAIXA INTELIGENTE */
        .caixa-box { background: white; padding: 20px; border-radius: 15px; border: 2px solid var(--laranja); }
        .input-caixa { font-size: 20px; padding: 15px; text-align: right; border: 2px solid #eee; border-radius: 10px; width: 100%; margin: 10px 0; }
        
        /* TABELAS E GRIDS */
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #fafafa; color: #777; font-size: 13px; }
        .badge { padding: 5px 10px; border-radius: 5px; font-size: 11px; font-weight: bold; }
        .badge-novo { background: #e3f2fd; color: #1976d2; }
        .badge-preparo { background: #fff3e0; color: #f57c00; }

        /* FORMUL√ÅRIOS */
        .form-area { background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; }
        input, select { padding: 12px; border: 1px solid #ddd; border-radius: 8px; width: 100%; margin-bottom: 10px; font-family: 'Montserrat'; }
        .btn-acao { background: var(--rosa); color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo-area">GIORDANO PRO</div>
        <div class="nav-link active" onclick="switchTab('pedidos')"><span>üõí</span> Pedidos</div>
        <div class="nav-link" onclick="switchTab('caixa')"><span>üí∞</span> Caixa Inteligente</div>
        <div class="nav-link" onclick="switchTab('config')"><span>‚öôÔ∏è</span> Configura√ß√µes</div>
        <div class="nav-link" onclick="switchTab('equipe')"><span>üë•</span> Nossa Equipe</div>
    </div>

    <div class="main-content">
        <div id="pedidos" class="tab-content active">
            <div class="header-top"><h2>Gest√£o de Pedidos</h2></div>
            <table>
                <thead>
                    <tr><th>ID</th><th>Cliente</th><th>Produto</th><th>Valor</th><th>Status</th><th>A√ß√µes</th></tr>
                </thead>
                <tbody id="lista-pedidos-tabela"></tbody>
            </table>
        </div>

        <div id="caixa" class="tab-content">
            <div class="header-top"><h2>Caixa Inteligente</h2></div>
            <div class="grid-stats">
                <div class="stat-card"><h4>Vendas Hoje</h4><p id="c-vendas">0</p></div>
                <div class="stat-card"><h4>Faturamento</h4><p id="c-faturamento">R$ 0,00</p></div>
            </div>
            <div class="caixa-box">
                <h3>Calculadora de Troco</h3>
                <label>Total do Pedido (R$):</label>
                <input type="number" id="caixa-total-pedido" class="input-caixa" placeholder="0.00">
                <label>Valor Recebido (R$):</label>
                <input type="number" id="caixa-recebido" class="input-caixa" placeholder="0.00" oninput="calcularTroco()">
                <label>M√©todo de Pagamento:</label>
                <select id="pagamento-tipo">
                    <option>Pix</option>
                    <option>Cart√£o de Cr√©dito</option>
                    <option>Cart√£o de D√©bito</option>
                    <option>Dinheiro</option>
                </select>
                <div style="background: var(--azul-escuro); color: white; padding: 20px; border-radius: 10px; margin-top: 15px;">
                    <h2 style="margin:0; border:none; color:white;">TROCO: <span id="resultado-troco" style="color:var(--verde)">R$ 0,00</span></h2>
                </div>
            </div>
        </div>

        <div id="config" class="tab-content">
            <div class="header-top"><h2>Configura√ß√µes do Card√°pio</h2></div>
            <div class="form-area">
                <h3>Adicionar / Editar Produto</h3>
                <input type="hidden" id="edit-id">
                <input type="text" id="p-nome" placeholder="Nome do Produto">
                <input type="text" id="p-preco" placeholder="Pre√ßo (Ex: 15.00)">
                <input type="text" id="p-foto" placeholder="URL da Foto">
                <select id="p-categoria">
                    <option>Doces</option>
                    <option>Salgados</option>
                    <option>Bebidas</option>
                </select>
                <button class="btn-acao" onclick="salvarProduto()">Salvar Produto</button>
            </div>
            <div id="grade-produtos-config" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap:15px;"></div>
        </div>

        <div id="equipe" class="tab-content">
            <div class="header-top"><h2>Nossa Equipe</h2></div>
            <div class="stat-card" style="text-align: left; border-left: 5px solid var(--rosa);">
                <p>Matheus Henrique</p>
                <small>Administrador Geral</small>
            </div>
        </div>
    </div>

    <audio id="som-notificacao" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>

<script>
    let qtdPedidosAnterior = 0;

    function switchTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function renderizarPedidos() {
        const pedidos = JSON.parse(localStorage.getItem('meusPedidosDG')) || [];
        
        // Notifica√ß√£o Sonora
        if(pedidos.length > qtdPedidosAnterior) {
            document.getElementById('som-notificacao').play();
            qtdPedidosAnterior = pedidos.length;
        }

        const lista = document.getElementById('lista-pedidos-tabela');
        lista.innerHTML = pedidos.slice().reverse().map(p => `
            <tr>
                <td>#${p.id.toString().slice(-4)}</td>
                <td>${p.cliente}</td>
                <td>${p.nome}</td>
                <td>R$ ${p.preco}</td>
                <td><span class="badge ${p.status === 'pendente' ? 'badge-novo' : 'badge-preparo'}">${p.status.toUpperCase()}</span></td>
                <td>
                    <button onclick="mudarStatus(${p.id}, 'preparando')">üë©‚Äçüç≥ Preparar</button>
                    <button onclick="mudarStatus(${p.id}, 'em rota')">üõµ Em Rota</button>
                    <button onclick="mudarStatus(${p.id}, 'finalizado')">‚úÖ Finalizar</button>
                </td>
            </tr>
        `).join('');
        atualizarResumoCaixa();
    }

    function mudarStatus(id, novoStatus) {
        let pedidos = JSON.parse(localStorage.getItem('meusPedidosDG'));
        const idx = pedidos.findIndex(p => p.id === id);
        pedidos[idx].status = novoStatus;
        localStorage.setItem('meusPedidosDG', JSON.stringify(pedidos));
        renderizarPedidos();
    }

    function calcularTroco() {
        const total = parseFloat(document.getElementById('caixa-total-pedido').value) || 0;
        const recebido = parseFloat(document.getElementById('caixa-recebido').value) || 0;
        const troco = recebido - total;
        document.getElementById('resultado-troco').innerText = `R$ ${troco > 0 ? troco.toFixed(2) : '0,00'}`;
    }

    function atualizarResumoCaixa() {
        const pedidos = JSON.parse(localStorage.getItem('meusPedidosDG')) || [];
        const finalizados = pedidos.filter(p => p.status === 'finalizado');
        const total = finalizados.reduce((acc, p) => acc + parseFloat(p.preco), 0);
        document.getElementById('c-vendas').innerText = finalizados.length;
        document.getElementById('c-faturamento').innerText = `R$ ${total.toFixed(2)}`;
    }

    // Configura√ß√£o de Produtos
    function salvarProduto() {
        const nome = document.getElementById('p-nome').value;
        const preco = document.getElementById('p-preco').value;
        const foto = document.getElementById('p-foto').value || 'https://via.placeholder.com/150';
        const categoria = document.getElementById('p-categoria').value;
        
        let cardapio = JSON.parse(localStorage.getItem('cardapio_giordano')) || [];
        cardapio.push({nome, preco, foto, categoria});
        localStorage.setItem('cardapio_giordano', JSON.stringify(cardapio));
        alert("Produto Salvo!");
        location.reload();
    }

    setInterval(renderizarPedidos, 5000);
    renderizarPedidos();
</script>
</body>
</html>
